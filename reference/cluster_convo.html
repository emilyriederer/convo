<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Cluster stubs by level to find duplicates — cluster_convo • convo</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Cluster stubs by level to find duplicates — cluster_convo" />
<meta property="og:description" content="This function clusters name stubs by level to find potential
typos or similarities between names in the convo. Note that this is a rough,
exploratory tool but due to the complexity of human language and the variety of potential
stubs, it is not a foolproof method of determining duplication. This is illustrated in
the documentation's examples in which the clustering of level 1 stubs does not
highlight the desired relationship (&quot;AMT&quot; versus &quot;AMOUNT&quot;) whereas it does highlight
the level 2 duplication (&quot;ACCOUNT&quot; versus &quot;ACCT&quot; versus &quot;ACCNT&quot;)." />
<meta property="og:image" content="https://emilyriederer.github.io/convo/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-183642879-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-183642879-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">convo</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/quickstart-guide.html">Quickstart guide</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/emilyriederer/convo/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Cluster stubs by level to find duplicates</h1>
    <small class="dont-index">Source: <a href='https://github.com/emilyriederer/convo/blob/master/R/cluster.R'><code>R/cluster.R</code></a></small>
    <div class="hidden name"><code>cluster_convo.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function clusters name stubs by level to find potential
typos or similarities between names in the <code>convo</code>. Note that this is a rough,
exploratory tool but due to the complexity of human language and the variety of potential
stubs, it is not a foolproof method of determining duplication. This is illustrated in
the documentation's examples in which the clustering of level 1 stubs does not
highlight the desired relationship ("AMT" versus "AMOUNT") whereas it does highlight
the level 2 duplication ("ACCOUNT" versus "ACCT" versus "ACCNT").</p>
    </div>

    <pre class="usage"><span class='fu'>cluster_convo</span><span class='op'>(</span>
  <span class='va'>convo</span>,
  adist_costs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>ins <span class='op'>=</span> <span class='fl'>1</span>, del <span class='op'>=</span> <span class='fl'>1</span>, sub <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>,
  hclust_method <span class='op'>=</span> <span class='st'>"single"</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>convo</th>
      <td><p>A <code>convo</code> object or list of stubs by level</p></td>
    </tr>
    <tr>
      <th>adist_costs</th>
      <td><p>Releative costs of insertion, deletion, and substitution
passed to the <code>costs</code> argument of <code><a href='https://rdrr.io/r/utils/adist.html'>adist()</a></code></p></td>
    </tr>
    <tr>
      <th>hclust_method</th>
      <td><p>Agglomeration method passed to the <code>method</code> argument of <code><a href='https://rdrr.io/r/stats/hclust.html'>hclust()</a></code></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list of <code>hclust</code> objects by level of the vocabulary</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The distance matrix is calculated using Levenshtein (edit) distance as implemented in
<code><a href='https://rdrr.io/r/utils/adist.html'>utils::adist</a></code>. By default, the cost of insertion and deletion operations is set
lower to that of substitution since, in this case, we are more likely to wish to
identify redundancies caused by increasing levels of abbreviation. Thus, we prefer
to consider as more similiar those stubs which are pure subsets of other stubs. This
weighting can be controlled by the <code>adist_costs</code> argument.</p>
<p>The clustering is done using hierarchical clustering as implemented in <code><a href='https://rdrr.io/r/stats/hclust.html'>stats::hclust()</a></code>.
By default, the agglomeration method is "single", but this can be altered with the argument
<code>hclust_method</code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>convo</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"IND"</span>, <span class='st'>"IS"</span>, <span class='st'>"AMT"</span>, <span class='st'>"AMOUNT"</span>, <span class='st'>"CAT"</span>, <span class='st'>"CD"</span><span class='op'>)</span>,
              <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ACCOUNT"</span>, <span class='st'>"ACCT"</span>, <span class='st'>"ACCNT"</span>, <span class='st'>"PROSPECT"</span>, <span class='st'>"CUSTOMER"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>clusts</span> <span class='op'>&lt;-</span> <span class='fu'>cluster_convo</span><span class='op'>(</span><span class='va'>convo</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>clusts</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span>
</div><div class='img'><img src='cluster_convo-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>clusts</span><span class='op'>[[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span>
</div><div class='img'><img src='cluster_convo-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='va'>stubs</span> <span class='op'>&lt;-</span> <span class='fu'><a href='parse_stubs.html'>parse_stubs</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"IND_ACCOUNT"</span>, <span class='st'>"AMT_ACCT"</span>, <span class='st'>"ID_ACCNT"</span>, <span class='st'>"DT_LOGIN"</span>, <span class='st'>"DT_ENROLL"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>clusts</span> <span class='op'>&lt;-</span> <span class='fu'>cluster_convo</span><span class='op'>(</span><span class='va'>stubs</span><span class='op'>)</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://emilyriederer.netlify.com/'>Emily Riederer</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


